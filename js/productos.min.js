$(document).ready((function(){$(".loading").addClass("d-none"),$("#productos").show();var jsonBusquedas="";$("#nuevo").click((function(){$("#actividad").val("nuevo");var datosSuccess="";$.ajax({async:!1,type:"POST",url:"<?php echo base_url() ?>index.php/productos/getDatosProductoNuevo",data:{},success:function(datos){datosSuccess=$.parseJSON(datos)},error:function(){alert("Error en el proceso. getVerProducto")}}),$("input.form-control").removeAttr("disabled"),$(".cerrar").addClass("d-none"),$(".grabar_editar").addClass("d-none"),$(".grabar_nuevo").removeClass("d-none"),$(".descatalogar_producto").addClass("d-none"),$(".catalogar_producto").addClass("d-none"),$(".cancelar_editar").removeClass("d-none"),$("#id").prop("disabled",!0),$("#iva").prop("disabled",!0),$("#precio_transformacion_unidad").prop("disabled",!0),$("#precio_transformacion_peso").prop("disabled",!0),$("#myModalProducto").css("color","black"),$(".modal-title").html("Introducir datos nuevo producto"),$.each(datosSuccess,(function(index,value){$("#"+index).val(value),$("#"+index).parent().children("label").addClass("active"),$('input[data-activates="select-options-'+index+'"]').length&&$('input[data-activates="select-options-'+index+'"]').val(datosSuccess["valor_"+index])})),$("#codigo_producto").removeAttr("disabled"),$("#fecha_modificacion").val("<?php echo date('d/m/Y') ?>"),$("#modificado_por").val("<?php echo $this->session->id ?>"),$("#id_grupo").prop("disabled",!1),$("#id_grupo").materialSelect("refresh"),$("#id_familia").prop("disabled",!1),$("#id_familia").materialSelect("refresh"),$("#id_proveedor_web").prop("disabled",!1),$("#id_proveedor_web").materialSelect("refresh"),$("#control_stock").prop("disabled",!1),$("#control_stock").materialSelect("refresh"),$("#tipo_unidad").prop("disabled",!1),$("#tipo_unidad").materialSelect("refresh"),$("#myModalProducto").modal({backdrop:"static",keyboard:!1})})),$("table#productos").delegate(".descatalogar","click",(function(){$("#actividad").val("descatalogar"),id=$(this).parent().parent().parent().parent().attr("producto");var datosSuccess="";$.ajax({async:!1,type:"POST",url:"<?php echo base_url() ?>index.php/productos/getDatosProducto",data:{id_pe_producto:id},success:function(datos){datosSuccess=$.parseJSON(datos)},error:function(){alert("Error en el proceso. getDatosProducto - descatalogar")}}),$("input.form-control").attr("disabled","disabled"),$('input[type="search"]').removeAttr("disabled"),$("#id_grupo").prop("disabled",!0),$("#id_grupo").materialSelect("refresh"),$("#id_familia").prop("disabled",!0),$("#id_familia").materialSelect("refresh"),$("#id_proveedor_web").prop("disabled",!0),$("#id_proveedor_web").materialSelect("refresh"),$("#control_stock").prop("disabled",!0),$("#control_stock").materialSelect("refresh"),$("#tipo_unidad").prop("disabled",!0),$("#tipo_unidad").materialSelect("refresh"),$(".cerrar").addClass("d-none"),$(".grabar_editar").addClass("d-none"),$(".grabar_nuevo").addClass("d-none"),$(".descatalogar_producto").removeClass("d-none"),$(".catalogar_producto").addClass("d-none"),$(".cancelar_editar").removeClass("d-none"),$(".modal-title").html("Datos producto - clasificado"),$("#myModalProducto").css("color","black"),$.each(datosSuccess,(function(index,value){$("#"+index).val(value),$("#"+index).parent().children("label").addClass("active"),$('input[data-activates="select-options-'+index+'"]').length&&$('input[data-activates="select-options-'+index+'"]').val(datosSuccess["valor_"+index])})),$("#myModalProducto").modal({backdrop:"static",keyboard:!1})})),$("table#productos").delegate(".catalogar","click",(function(){$("#actividad").val("catalogar"),id=$(this).parent().parent().parent().parent().attr("producto");var datosSuccess="";$.ajax({async:!1,type:"POST",url:"<?php echo base_url() ?>index.php/productos/getDatosProducto",data:{id_pe_producto:id},success:function(datos){datosSuccess=$.parseJSON(datos)},error:function(){alert("Error en el proceso. getDatosProducto-catalogar")}}),$("input.form-control").attr("disabled","disabled"),$('input[type="search"]').removeAttr("disabled"),$("#id_grupo").prop("disabled",!0),$("#id_grupo").materialSelect("refresh"),$("#id_familia").prop("disabled",!0),$("#id_familia").materialSelect("refresh"),$("#id_proveedor_web").prop("disabled",!0),$("#id_proveedor_web").materialSelect("refresh"),$("#control_stock").prop("disabled",!0),$("#control_stock").materialSelect("refresh"),$("#tipo_unidad").prop("disabled",!0),$("#tipo_unidad").materialSelect("refresh"),$(".cerrar").addClass("d-none"),$(".grabar_editar").addClass("d-none"),$(".grabar_nuevo").addClass("d-none"),$(".descatalogar_producto").addClass("d-none"),$(".catalogar_producto").removeClass("d-none"),$(".cancelar_editar").removeClass("d-none"),$(".modal-title").html("Datos producto - clasificado"),$("#myModalProducto").css("color","black"),$.each(datosSuccess,(function(index,value){$("#"+index).val(value),$("#"+index).parent().children("label").addClass("active"),$('input[data-activates="select-options-'+index+'"]').length&&$('input[data-activates="select-options-'+index+'"]').val(datosSuccess["valor_"+index])})),$("#myModalProducto").modal({backdrop:"static",keyboard:!1})})),$("#signin").on("click",(function(){$("#myModal1").modal("hide")})),$("#signin").on("click",(function(){$("#productos_compra").prop("checked")?$("#myModal2").modal("show"):$("#myModal3").modal("show")})),$("#no_filtros").click((function(){$("#productos thead input").val("").change()})),$("#exportar").click((function(e){$("#exportar > div.spinner-border").removeClass("d-none"),jsonBusquedas="/";var v="_",i;for(""!=$("#productos_filter > input").val()&&(v=encodeURIComponent($("#productos_filter > input").val())),jsonBusquedas+=v,i=2;i<13;i++){jsonBusquedas+="/";var v="_";""!=$("#productos > thead > tr:nth-child(2) > th:nth-child("+i+") > input").val()&&(v=encodeURIComponent($("#productos > thead > tr:nth-child(1) > th:nth-child("+i+") > input").val())),jsonBusquedas+=v}return console.log(this.href+jsonBusquedas),setTimeout((function(){$("#exportar > div.spinner-border").addClass("d-none")}),2e3),window.location.href=this.href+jsonBusquedas,!1})),$("table#productos").delegate(".editar","click",(function(){$("#actividad").val("editar"),id=$(this).parent().parent().parent().parent().attr("producto"),$("#cerrar").addClass("hide"),$("#grabar").removeClass("hide"),$("#cancelar").removeClass("hide");var datosSuccess="";$.ajax({async:!1,type:"POST",url:"<?php echo base_url() ?>index.php/productos/getDatosProducto",data:{id_pe_producto:id},success:function(datos){datosSuccess=$.parseJSON(datos)},error:function(){alert("Error en el proceso. getVerProducto")}}),$("input.form-control").removeAttr("disabled"),$("#iva").prop("disabled",!0),$("#precio_transformacion_unidad").prop("disabled",!0),$("#precio_transformacion_peso").prop("disabled",!0),$("#fecha_modificacion").val("<?php echo date('d/m/Y') ?>"),$("#modificado_por").val("<?php echo $this->session->id ?>"),$("#id_grupo").prop("disabled",!1),$("#id_grupo").materialSelect("refresh"),$("#id_familia").prop("disabled",!1),$("#id_familia").materialSelect("refresh"),$("#id_proveedor_web").prop("disabled",!1),$("#id_proveedor_web").materialSelect("refresh"),$("#control_stock").prop("disabled",!1),$("#control_stock").materialSelect("refresh"),$("#tipo_unidad").prop("disabled",!0),$("#tipo_unidad").materialSelect("refresh"),$("input#id").attr("disabled","disabled"),$("input#codigo_producto").attr("disabled","disabled"),$("#myModalProducto").css("color","black"),$(".modal-title").html("Modificar datos producto"),$(".cerrar").addClass("d-none"),$(".grabar_editar").removeClass("d-none"),$(".grabar_nuevo").addClass("d-none"),$(".descatalogar_producto").addClass("d-none"),$(".catalogar_producto").addClass("d-none"),$(".cancelar_editar").removeClass("d-none"),$.each(datosSuccess,(function(index,value){$("#"+index).val(value),$("#"+index).parent().children("label").addClass("active"),$('input[data-activates="select-options-'+index+'"]').length&&$('input[data-activates="select-options-'+index+'"]').val(datosSuccess["valor_"+index])})),$("#myModalProducto").modal({backdrop:"static",keyboard:!1})})),$("table#productos").delegate(".ver","click",(function(){$("#actividad").val("ver"),id=$(this).parent().parent().parent().parent().attr("producto");var datosSuccess="";$.ajax({async:!1,type:"POST",url:"<?php echo base_url() ?>index.php/productos/getDatosProducto",data:{id_pe_producto:id},success:function(datos){datosSuccess=$.parseJSON(datos)},error:function(){alert("Error en el proceso. getVerProducto")}}),$("input.form-control").attr("disabled","disabled"),$('input[type="search"]').removeAttr("disabled"),$("#id_grupo").prop("disabled",!0),$("#id_grupo").materialSelect("refresh"),$("#id_familia").prop("disabled",!0),$("#id_familia").materialSelect("refresh"),$("#id_proveedor_web").prop("disabled",!0),$("#id_proveedor_web").materialSelect("refresh"),$("#control_stock").prop("disabled",!0),$("#control_stock").materialSelect("refresh"),$("#tipo_unidad").prop("disabled",!0),$("#tipo_unidad").materialSelect("refresh"),$(".cerrar").removeClass("d-none"),$(".grabar_editar").addClass("d-none"),$(".grabar_nuevo").addClass("d-none"),$(".descatalogar_producto").addClass("d-none"),$(".catalogar_producto").addClass("d-none"),$(".cancelar_editar").addClass("d-none"),$(".modal-title").html("Datos producto"),$("#myModalProducto").css("color","black"),$.each(datosSuccess,(function(index,value){$("#"+index).val(value),$("#"+index).parent().children("label").addClass("active"),$('input[data-activates="select-options-'+index+'"]').length&&$('input[data-activates="select-options-'+index+'"]').val(datosSuccess["valor_"+index])})),$("#myModalProducto").modal({backdrop:"static",keyboard:!1})})),$("table#productos").delegate(".img","click",(function(){$("#actividad").val("imagen"),id=$(this).parent().parent().attr("producto");var img=$(this).attr("src"),datosSuccess="";$.ajax({async:!1,type:"POST",url:"<?php echo base_url() ?>index.php/productos/getDatosProducto",data:{id_pe_producto:id},success:function(datos){datosSuccess=$.parseJSON(datos)},error:function(){alert("Error en el proceso. getVerProducto")}}),$("input.form-control").attr("disabled","disabled"),$("#id_grupo").prop("disabled",!0),$("#id_grupo").materialSelect("refresh"),$("#id_familia").prop("disabled",!0),$("#id_familia").materialSelect("refresh"),$("#id_proveedor_web").prop("disabled",!0),$("#id_proveedor_web").materialSelect("refresh"),$("#control_stock").prop("disabled",!0),$("#control_stock").materialSelect("refresh"),$("#tipo_unidad").prop("disabled",!0),$("#tipo_unidad").materialSelect("refresh"),$(".cerrar").removeClass("d-none"),$(".grabar_editar").addClass("d-none"),$(".grabar_nuevo").addClass("d-none"),$(".descatalogar_producto").addClass("d-none"),$(".catalogar_producto").addClass("d-none"),$(".cancelar_editar").addClass("d-none"),$(".modal-title").html("Datos producto"),$("#myModalProducto").css("color","black"),$.each(datosSuccess,(function(index,value){$("#"+index).val(value),$("#"+index).parent().children("label").addClass("active"),$('input[data-activates="select-options-'+index+'"]').length&&$('input[data-activates="select-options-'+index+'"]').val(datosSuccess["valor_"+index])})),console.log(img);var producto=$(this).parent().parent().children("td:eq(3)").html();console.log(producto);var codigo13=$(this).parent().parent().children("td:eq(1)").html();console.log(codigo13);var codigoBoka=$(this).parent().parent().children("td:eq(2)").html();console.log(codigoBoka),$(".modal-title-imagen").html("<h5>Imagen del producto</h5><h5><b>"+producto+"</b></h5><h5>Código: "+codigo13+"</h5><h5>Boka: "+codigoBoka+"</h5>"),""==img?$("#imagen").html("Este producto NO tiene imagen"):$("#imagen").html('<img src="'+img+'" alt="NO se ha encontrado la imagen<br>"'+img+" >"),$("#mostrarImagenModal").modal()})),$(".dataTables_length").addClass("bs-select"),$("#productos tfoot tr").appendTo("#productos thead")}));